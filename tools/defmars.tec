! DEFMARS: TECO MACRO TO CONVERT LANGUAGE INDEPENDENT STRUCTURE
  DEFINITIONS INTO MARS SOURCE (CONSISTENT WITH STARLET STRUCTURE
  MACROS. OPEN THE FILE AND LET RUN.
  Q-REGISTER USAGE (IMPORTANT ONES ONLY):
	N: STRUCTURE NAME
	O: DEFINITION MACRO SUFFIX
	M: NAME OF CURRENT FIELD OR SUBFIELD
	   VIELD MASK FLAG ('M' IF MASK TO BE GENERATED)
	V: ASCII UNIT SUFFIX
	   EQULST TAG FIELD
	C: NUMBER OF UNITS IN FIELD OR SUBFIELD
	   MASK FLAG FOR INDIVIDUAL VIELD ENTRY
	W: TOTAL FIELD OR SUBFIELD WIDTH IN BYTES
	   EQULST INCREMENT STRING
	L: TOTAL WIDTH OF CURRENT FIELD
	K: BYTES ALLOCATED IN CURRENT FIELD SO FAR
	S: STARTING BYTE OFFSET OF CURRENT SUBFIELD
	T: STARTING BYTE OFFSET OF LAST SUBFIELD
	U: ENDING BYTE OFFSET OF LAST SUBFIELD
	I: START OF LAST .BLKX STRING
	J: END OF      "     "     "
!
@^US/<S -1A-^^_"N -1A-^^$"N 0;''>/
@^UE/<S-1A-^^;"E R0;' -1A-13"E R0;'>/
@^UX/0L<0A-^^;"E 0L0;' 0A-13"E 0L0;'
::S$BITPOSITION"S FR .U8S(Q8,.K S) -DQ8J'
::S$BYTEOFFSET"S FR .U8S(Q8,.K S) -DQ8J'
::S$FIELDWIDTH"S FR .U8S(Q8,.K FS$V$S S) -DQ8J'
C>/
J<S$STRUCT;SS.U1MSRQ1,.XN ^UODEF 0A-^^,"E C.U1MSR Q1,.XO' ME
0KI	.MACRO	$GNGOI,$GBL

	$DEFINI	GNI,$GBL			LI
 0UL

<!LOOP! ::SS 
0A-^^F"E SS.U1MSRQ1,.XM 1UC0UW^^LUV0A-^^,"E C0AUV'
QV-^^B"E 1UW' QV-^^T"E 1UW' QV-^^W"E 2UW' QV-^^L"E 4UW' QV-^^Q"E 8UW'
QW"E OBADW'
MS R0A-^^,"E C\UC QC"E 1UC' QW*QCUW'
QL-QK"G 0LI			.BLKB	QL-QK\I
' ME 0KI$DEF	GNI$QVI I_ .U1GM.U2 Q1-Q2"E 0KI		'
I	.UI I.BLKQVIQV-^^T"E -DIB' I	QC\.UJI	L
QWUK QWUL 0UT 0UU OLOOP'

0A-^^V"E S< 0AUM ME0KI	$VIELD	GNI,0,<-		L
<!L! QMUC::SS  0A-^^>"E 0KI		0;' 0A-13"E I-LOL' 0A-^^;"E 0LI-LOL'
I<MS R0A-^^,"N I,,' 0A-^^,"E 2<MS> -1A-^^,"N RI,'' .U1 MSR0A-^^,"E C0AUC'
ME Q1,.K  QC-^^M"E IM' I>-		L>L OLOOP'

0A-^^S"E SS.U1MSRQ1,.XM 1UC0UW^^LUV QUUS
0A-^^,"E C.U1\U2.-Q1"N Q2US'' 0A-^^,"E C0AUV'
QV-^^B"E 1UW' QV-^^T"E 1UW' QV-^^W"E 2UW' QV-^^L"E 4UW' QV-^^Q"E 8UW'
QW"E OBADW'
MS R0A-^^,"E C\UC QC"E 1UC' QW*QCUW'
QS-QK"L .U1 QI,QJKI	 QTUK Q1+QI-QJ+1J'
QS-QT"L OBSUB' QS+QW-QL"G OESUB'
QS-QK"G 0LI			.BLKB	QS-QK\I
' ME0KI$DEF	GNI$QVI I_ .U1GM.U2 Q1-Q2"E 0KI		'
I	.UI I.BLKQVIQV-^^T"E -DIB' I	QC\.UJI	L
QSUT QS+QWUK QKUU OLOOP'

0A-^^C"E C::SS 0A-^^<"N .U1 MXQ1J MSRQ1,.XM ^^CUV C
0KI$EQU	GNI$QVII_GMI	L OLOOP'

0U70U9 C ::SS .U1MS [N R.-Q1"N Q1,.XN'
^UV$C_ 0A-^^,"E C.U1MSR .-Q1"N Q1,.XV'' 0KI$EQULST	GNGVI,$GBL
0A-^^,"N I,R' C.U1MSR .-Q1"E I0'
0A-^^,"N I,R' C.U1MSR .-Q1"E I1' Q1,.XW .U1ME Q1,.KI,<-	L
<!L! ::SS .U1 0A-^^>"E 0KI		L0;'
0A-13"E I- LOL' 0A-^^;"E 0LI- LOL'
0LQ7"E %9-10"G I	>
$EQULST	GNGVI,$GBL,,GWI,<-
 1U9'' ::SS .U1MXQ1J Q7"E I<' ME<-1A-32"N -1A-9"N 0;'' R>
-1A-^^-"E Q7"E 1U7 -S,I<' %9 LOL' Q7"N I>' 0U7 I>-	 L  > ]N OLOOP'

0A-^^L"E SS.U1MSRQ1,.XM ^^CUV
ME0KI$DEF	GNI$QVII_GMI			L
QL-QK"G -LI			.BLKB	QL-QK\I
L' 0UK 0UL 0UT OLOOP'

0A-^^E"E QL-QK"G 0LI			.BLKB	QL-QK\I
' ME 0K I
	$DEFEND	GNI,$GBL		 LI
	.ENDM	$GNGOI
 0;'
L>
> OEXIT
!BADW! BAD FIELD TYPE CHARACTER
 V OEXIT
!BSUB! SUBFIELD OUT OF ORDER
 V OEXIT
!ESUB! SUBFIELD EXCEEDS FIELD
 V OEXIT
!EXIT! EI
