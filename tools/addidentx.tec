! TECO macro to add an audit line to the front of an update packet. Either
  takes the audit from the command line, or if not present, searches for it
  in the first revision history entry. Also, if the packet is in [.BUG],
  searches, the corresponding master [.enh] and maximizes the ident.
  Invoke with:
  MUNG ADDIDENT, filename, audit, master ENH
!
j:s,"s .u1 j:s["s .u0' j:s<"s .u0' j:s]"s .u2' j:s>"s .u2'
q1-q0"g q2-q1"g q2j:s,"s .u1 | zu1' '' | zu1'
q1j -1a-^^,"e -d' 0xf0k <ss; fr> :s,"u zj | -d' 0xi0k hxmhk
0uj hkgf j:s.BUG]"s 0kgm fs.xxx.UPD hxg hk:erqg"s y
:sVdd-ddd"s 3r \+1uj'''
hk ebqfy
^N"e zj 12i aj'
:qi"e :s modified by:  :saadddd"s
^sc -sr .u1 .-1,.xi sr .-1u2
0qi-33"l 0l .,.+1xi' q1,q2:xi | Revision Audit ID not found - using "**NEW**"
 ^ui**NEW** ' '
ji-,,/ gi i-UV/
 :sVdd-ddd"s ^yxj 3r\u1 qj-q1"g -3d qj-100"l i0 qj-10"l i0'' qj\
.-3,.xk :sqj"s -3dgk' ''
ex

