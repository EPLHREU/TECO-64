*! TECO test: Set memory size !
! Commands: nEC !
! Requirements: None !
! Execution: Redirect !
! Expect: PASS [EC-01.log] !
 
! Start of initialization !

0,128 ET                                ! Abort if error occurs !

EO - 100 "L
    -1 EJ - 1024 "E                     ! TECO-32 !
        1 UZ                            ! -P !
    |                                   ! Unknown or unsupported TECO !
        0 UZ                            ! Assume no -P or ext. features !
    '
    13@^UY// 10:@^UY//                  ! MY inserts CR/LF !
    @^UZ/ ^D 13^T 10^T/                 ! MZ prints CR/LF !
|
    EO - 200 "L                         ! TECO C !
        0 UZ                            ! No -P !
        10@^UY//                        ! MY inserts LF !
        @^UZ/ ^D 13^T 10^T/             ! MZ prints CR/LF !
    |                                   ! TECO-64 !
        3 UZ                            ! -P, ext. features !
        10@^UY//                        ! MY inserts LF !
        @^UZ/ ^D 10^T/                  ! MZ prints newline (LF or CR/LF) !
    '
'

@^UF\ @^A/!FA\ :@^UF\IL!/ MZ ^C \       ! MF aborts unconditionally !

@^UN\"N MF '\                           ! MN aborts if not zero !

@^US\"S MF '\                           ! MS aborts if success or negative !

@^UU\"U MF '\                           ! MU aborts if failure or zero!

@^A/Starting TECO v/ EO:= @^A/ test/ MZ

HK                                      ! Clear the edit buffer !

! Start of test !
``
Starting TECO v200 test
*
*
*            0 EC ``
[1K bytes]
*               ! Test: minimize edit buffer !
            2 EC ``
[2K bytes]
*               ! Test: increase edit buffer to 2 KB !
            1 EC ``
[1K bytes]
*               ! Test: decrease edit buffer to 1 KB !
            4 EC ``
[4K bytes]
*               ! Test: increase edit buffer to 4 KB !
         1024 EC ``
[1M bytes]
*               ! Test: increase edit buffer to 1 MB !
(1024 * 1024) EC ``
[1G bytes]
*               ! Test: increase edit buffer to 1 GB !
            0 EC ``
[1K bytes]
*               ! Test: minimize edit buffer !
           -1 EC ``
[1G bytes]
*               ! Test: maximize edit buffer !
         1024 EC ``
[1M bytes]
*               ! Test: decrease edit buffer to 1 MB !
            4 EC ``
[4K bytes]
*               ! Test: decrease edit buffer to 4 KB !
            1 EC ``
[1K bytes]
*               ! Test: decrease edit buffer to 1 KB !
            2 EC ``
[2K bytes]
*               ! Test: decrease edit buffer to 2 KB !
            0 EC ``
[1K bytes]
*               ! Test: minimize edit buffer !

!PASS!
``
*